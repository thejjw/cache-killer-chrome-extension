<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      width: 280px;
      padding: 10px;
      font-family: Arial, sans-serif;
      font-size: 14px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 15px;
      font-weight: bold;
      color: #333;
    }
    
    .toggle-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.3s;
      border-radius: 24px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: #ff4444;
    }
    
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    
    .status {
      text-align: center;
      margin-top: 10px;
      font-size: 12px;
      color: #666;
    }
    
    .status.enabled {
      color: #ff4444;
      font-weight: bold;
    }
    
    .info {
      font-size: 11px;
      color: #888;
      text-align: center;
      margin-top: 10px;
      line-height: 1.3;
    }
    
    .mode-section {
      margin: 15px 0;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }
    
    .mode-container {
      margin-bottom: 10px;
    }
    
    .mode-label {
      font-weight: bold;
      margin-bottom: 5px;
      font-size: 12px;
      color: #333;
    }
    
    .radio-group {
      display: flex;
      gap: 15px;
    }
    
    .radio-option {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .radio-option input[type="radio"] {
      margin: 0;
    }
    
    .radio-option label {
      font-size: 11px;
      color: #666;
      cursor: pointer;
    }
    
    .url-section {
      margin-top: 10px;
    }
    
    .url-button {
      width: 100%;
      padding: 8px;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      font-size: 11px;
      color: #333;
      transition: background-color 0.2s;
    }
    
    .url-button:hover {
      background-color: #e0e0e0;
    }
    
    .url-count {
      font-size: 10px;
      color: #888;
      text-align: center;
      margin-top: 5px;
    }
    
    .disabled {
      opacity: 0.5;
      pointer-events: none;
    }
    
    .page-status {
      margin: 12px 0;
      padding: 8px;
      border-radius: 4px;
      font-size: 11px;
      text-align: center;
      font-weight: bold;
    }
    
    .page-status.active {
      background-color: #e8f5e8;
      color: #2e7d2e;
      border: 1px solid #4CAF50;
    }
    
    .page-status.inactive {
      background-color: #f5f5f5;
      color: #666;
      border: 1px solid #ccc;
    }
    
    footer {
      margin-top: 15px;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }
    
    .copyright {
      font-size: 9px;
      color: #999;
      text-align: center;
    }
    
    .advanced-section {
      margin-top: 15px;
      padding-top: 10px;
      border-top: 1px solid #eee;
    }
    
    .cache-clear-container {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
    }
    
    .manual-cache-button {
      padding: 4px 8px;
      background-color: #ff4444;
      color: white;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      font-size: 10px;
      transition: background-color 0.2s;
      white-space: nowrap;
    }
    
    .manual-cache-button:hover {
      background-color: #e63939;
    }
    
    .manual-cache-button:active {
      background-color: #cc2e2e;
    }
    
    .manual-cache-button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    
    .reset-button:hover {
      background-color: #c82333;
    }
    
    .reset-button:active {
      background-color: #bd2130;
    }
    
    .mode-label.clickable {
      cursor: pointer;
      user-select: none;
    }
    
    .mode-label.clickable:hover {
      color: #555;
    }
    
    .advanced-content, .expert-settings {
      transition: all 0.2s ease-in-out;
    }
    
    .toggle-icon {
      transition: transform 0.2s ease-in-out;
    }
  </style>
</head>
<body>
  <div class="header">Cache Killer</div>
  
  <div class="toggle-container">
    <span>Disable Cache</span>
    <label class="switch">
      <input type="checkbox" id="toggleSwitch">
      <span class="slider"></span>
    </label>
  </div>
  
  <div class="status" id="status">Disabled</div>
  
  <div class="page-status" id="pageStatus">
    Checking current page...
  </div>
  
  <div class="info">
    When enabled, pages will always load fresh content from the server by modifying request headers to prevent caching.
  </div>
  
  <div class="mode-section">
    <div class="mode-container">
      <div class="mode-label">Mode:</div>
      <div class="radio-group">
        <div class="radio-option">
          <input type="radio" id="modeAll" name="mode" value="all" checked>
          <label for="modeAll">All Sites</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="modeInclusive" name="mode" value="inclusive">
          <label for="modeInclusive">Include List</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="modeExclusive" name="mode" value="exclusive">
          <label for="modeExclusive">Exclude List</label>
        </div>
      </div>
    </div>
    
    <div class="url-section">
      <button class="url-button" id="configureUrls">Configure Domain List</button>
      <div class="url-count" id="urlCount">0 domains configured</div>
    </div>
    
    <div class="advanced-section">
      <div class="mode-label clickable" id="advancedOptionsToggle" title="Click to show/hide advanced cache clearing options">
        <span>Advanced Cache Options</span> <span id="toggleIcon" style="font-size: 10px; color: #666;">‚ñº</span>
      </div>
      
      <div class="advanced-content" id="advancedContent" style="display: none;">
        <div style="font-size: 10px; color: #888; margin: 5px 0; line-height: 1.3;">
          ‚ÑπÔ∏è Primary cache prevention uses request headers (should work always). These are optional cache clearing features.
        </div>
        
        <div class="radio-option" style="margin-top: 8px;">
          <input type="checkbox" id="periodicCacheClearing">
          <label for="periodicCacheClearing" style="font-size: 11px; color: #666; cursor: pointer;">
            Periodic cache clearing
          </label>
        </div>
        <div class="radio-option" style="margin-top: 5px;">
          <input type="checkbox" id="wildcardFallbackAllCache">
          <label for="wildcardFallbackAllCache" style="font-size: 11px; color: #666; cursor: pointer;">
            Change behavior to clear all cache for wildcard cases (e.g., *.example.com)
          </label>
        </div>
        <div class="cache-clear-container">
          <span style="font-size: 10px; color: #999;">Manual cache clear: </span>
          <button class="manual-cache-button" id="manualCacheClear">Clear Cache Now</button>
        </div>
        <div style="font-size: 10px; color: #999; margin-top: 3px; line-height: 1.2;">
          ‚ÑπÔ∏è Periodic clearing with wildcard fallback: by default, wildcard patterns (*.domain.com) skip cache clearing to avoid affecting all sites.
        </div>
        
        <!-- Expert Settings -->
        <div style="border-top: 1px dashed #ccc; margin-top: 10px; padding-top: 8px;">
          <div style="font-size: 10px; color: #888; margin-bottom: 5px;">Expert Settings:</div>
          
          <div style="display: flex; align-items: center; gap: 5px; margin: 5px 0 3px 0;">
            <label for="periodicCacheTime" style="font-size: 9px; color: #666; min-width: 80px;">Periodic time:</label>
            <input type="number" id="periodicCacheTime" min="1" max="60" value="5" style="width: 40px; font-size: 9px; padding: 1px 3px;">
            <span style="font-size: 9px; color: #888;">min</span>
          </div>
          
          <div style="display: flex; align-items: center; gap: 5px; margin-bottom: 5px;">
            <label for="manualCacheTime" style="font-size: 9px; color: #666; min-width: 80px;">Manual time:</label>
            <input type="number" id="manualCacheTime" min="1" max="168" value="24" style="width: 40px; font-size: 9px; padding: 1px 3px;">
            <span style="font-size: 9px; color: #888;">hrs</span>
          </div>
          
          <button class="reset-button" id="resetAllSettings" style="padding: 3px 8px; background-color: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 9px; margin-top: 3px;">
            Reset All Settings
          </button>
          
          <div style="font-size: 8px; color: #999; margin-top: 3px; line-height: 1.2;">
            Time ranges control how far back cache is cleared. Lower values = better performance.
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="current-domain-info" id="currentDomainInfo" style="text-align: center; font-size: 10px; color: #999; margin: 8px 0; line-height: 1.2; display: none;">
    <span>üí° Current page domain: <strong id="currentDomain">‚Äî</strong></span>
  </div>
  
  <footer>
    <div class="copyright">¬© 2025 @thejjw ‚Ä¢ <span id="version"></span></div>
  </footer>
  
  <script src="popup.js"></script>
</body>
</html>
